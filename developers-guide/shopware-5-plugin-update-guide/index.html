<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Shopware 5 Plugin update guide</title><meta name="description" content="Shopware 5 Plugin update guide"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="theme-color" content="#26556f"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:700,600,400" type="text/css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/docsearch.min.1501499833.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/basic.1501499833.css" media="screen"><link rel="alternate" type="application/atom+xml" href="https://developers.shopware.com/blog/atom.xml" title="Shopware Developer blog feed"></head><body>
<div class="wrapper">

    <header class="header--main"><a href="https://developers.shopware.com/" class="offcanvas--trigger" title="Navigation">
            <i class="icon-list"></i>
        </a>

        <a href="https://developers.shopware.com/" title="Shopware Developer Documentation" class="logo">
            <img src="https://developers.shopware.com/assets/img/logo-devdocs.1501499833.png"></a>

    </header><div id="searchBox">
        <form action="#" method="get" id="search-form">
            <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off"><button id="search-action"></button>
        </form>
    </div>

    <nav class="navi--main" data-offcanvas="true"><div class="navi--content">
            <ul class="navi--tree"><li class="navi--chapter is--active">
                    <a href="/developers-guide/" class="navi--link is--active has--children">
                       Developer Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter is--active">

                            <a class="navi--link is--active has--children" href="/plugin-guide/">
                                Developing plugins
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-quick-start/">
                                                Quick start guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/example-plugin/">
                                                Storefront extension
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/controller/">
                                                Controllers
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/event-guide/">
                                                Events
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/services/">
                                                Services
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-configuration/">
                                                Plugin configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-testing/">
                                                Plugin testing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-license/">
                                                Plugin License
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link is--active" href="/developers-guide/shopware-5-plugin-update-guide/">
                                                Plugin update guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-extension-by-plugin/">
                                                Extend an existing plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-system/">
                                                The 5.2 Plugin System
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/cheat-sheet/">
                                                Cheat-Sheet
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/phpstorm/">
                                                Setting up PhpStorm
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-upgrade-guide-for-developers/">
                                                Upgrade Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-performance-for-devs/">
                                                Performance Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/debugging/">
                                                Debugging Shopware
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/elasticsearch/">
                                                Elasticsearch
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-config/">
                                                config.php settings
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/06/09/understanding-the-shopware-hook-system/">
                                                Hooks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/08/11/the-shopware-seo-engine/">
                                                SEO Engine
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-media-service/">
                                                MediaService
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/http-cache/">
                                                HTTP Cache
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/address-management-guide/">
                                                Address Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/attribute-system/">
                                                Attributes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/csrf-protection/">
                                                CSRF Protection
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/dic-tags/">
                                                Dependency Injection Tags
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-cli-commands/">
                                                CLI commands
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-search-bundle/">
                                                SearchBundle
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-core-service-extensions/">
                                                Service extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/entity-relationship-model/">
                                                Entity relationship model
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/password-encoder/">
                                                Password encoder
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/global-variables-in-templates/">
                                                Global variables in templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/media-optimizer/">
                                                Media Optimizer
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/concept-cart-bundle/">
                                                Cart Concept
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/customer-streams-extension/">
                                                Customer - Search &amp; Streams
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/custom-shopping-world-elements/">
                                                Create custom shopping worlds elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/digital-publishing-elements/">
                                                Create custom digital publishing elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/emotion-preset-plugin/">
                                                Create custom emotion preset plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-lastregistrations-widget/">
                                                Create your own backend widget
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/payment-plugin/">
                                                Create custom payment plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-slugify/">
                                                Create custom url slugger
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/risk-rules/">
                                                Risk Rules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/vagrant-phpstorm/">
                                                Vagrant and PHPStorm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/backend-and-extjs/">
                                Backend and ExtJS
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-extension/">
                                                Extending the backend
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/basics/">
                                                Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing/">
                                                Listing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/detail/">
                                                Detail
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/associations/">
                                                Associations
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing-extensions/">
                                                Listing extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/batch-processes/">
                                                Batch processes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/lightweight-backend-modules/">
                                                Lightweight backend modules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/backend-icons/">
                                                Backend icon set
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-escaping/">
                                                Backend escaping
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/rest/">
                                REST API
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/">
                                                REST API Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/article/">
                                                The article resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer/">
                                                The customer resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/order/">
                                                The order resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/translation/">
                                                The translation resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/category/">
                                                The category resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/media/">
                                                The media resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/merge-mode/">
                                                The merge mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/cache/">
                                                The cache resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/batch/">
                                                The batch mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/customer-streams/">
                                                Customer Streams
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/filter/">
                                                Filter
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/payment/">
                                                Payment
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/plugin-api-extension/">
                                                Create your own endpoint
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/extend-api-resource/">
                                                Extend a REST API resource
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/designers-guide/" class="navi--link has--children">
                       Frontend Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/theme-guide/">
                                Developing Themes
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/theme-startup-guide/">
                                                Theme Startup Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/getting-started/">
                                                Getting started with templating
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty/">
                                                Getting started with Smarty
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/less/">
                                                Getting started with LESS
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/css-and-js-files-usage/">
                                                Using CSS and JavaScript
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-theme-default-components/">
                                                Using the theme default components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-statemanager-and-pluginbase/">
                                                jQuery plugins &amp; the StateManager
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/configuration-using-theme-php/">
                                                Custom theme configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/preparing-themes-for-the-community-store/">
                                                Preparing themes for the community store
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/eslint-for-plugins/">
                                                ESLint for plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-coding-style/">
                                                Javascript Coding Style
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/styletile/">
                                                UI Components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/snippets/">
                                                Snippet Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/datepicker/">
                                                Datepicker
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/external-resources/">
                                                Embedding external resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-images/">
                                                Responsive images
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/best-practice-theme-development/">
                                                Using the Grunt watcher
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/modify-jquery-plugins/">
                                                Modify jQuery plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-bower/">
                                                Managing dependencies with Bower
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-npm/">
                                                Managing dependencies with NPM
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/legacy-template-development-in-shopware-5/">
                                                Legacy template development
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/how-to-use-karma/">
                                                Testing with Karma
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/find-smarty-blocks/">
                                                How to find smarty blocks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-templates/">
                                                Adding custom templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-listing-page/">
                                                Example: Custom listing page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-detail-page/">
                                                Example: Custom Detail page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/edit-newsletter-and-document-templates/">
                                                Edit newsletter and document templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/google-pagespeed-best-practise/">
                                                Google PageSpeed
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/browser-notice/">
                                                Outdated browser notification
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/range-slider-algorithm/">
                                                Range slider algorithm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/contributing/" class="navi--link has--children">
                       Contributing
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/contributing-code/">
                                Contributing Code
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/contribution-guideline/">
                                Contribution Guideline
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/developers-guide/coding-standards/">
                                Coding Standards
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/irc/">
                                IRC Channel
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/sysadmins-guide/" class="navi--link has--children">
                       System Guides
                    </a>

                                        <ul class="navi--sub-tree"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/system-requirements/">
                                System requirements
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/installation-guide/">
                                Installation Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/update-guide/">
                                Update Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">
                                Performance Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/elasticsearch-setup/">
                                Elasticsearch setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/varnish-setup/">
                                Varnish setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/sessions/">
                                Sessions
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/shopware-cluster-setup/">
                                Cluster setup
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/blog/" class="navi--link">
                       Blog
                    </a>

                                    </li>

                            </ul></div>
    </nav><div class="devdocs content">

        <section id="search-results" style="display: none;"><h2 class="search-results--headline" id="search-results">Search results</h2>

            <div class="entries"></div>
        </section><div class="inner-container">

            <div class="info">

                
                                <a class="edit-on-github" href="https://github.com/shopware/devdocs/blob/master/source/developers-guide/shopware-5-plugin-update-guide/index.md" target="_blank"><i class="icon-github"></i> Edit this page on GitHub</a>
                
            </div>

                        <h1>
                Shopware 5 Plugin update guide
            </h1>
            
            <div class="toc-list"></div>

<h2 id="introduction">Introduction</h2>

<p>In this guide we provide you with all essential information you need to keep your plugins Shopware 5.0 compatible.</p>

<p>Most changes are optional, as the old syntax will still work in most cases.</p>

<h2 id="template-extensions">Template extensions</h2>

<p>To ensure your templates files are extensible, neither <strong>extendsTemplate</strong> nor <strong>extendsBlock</strong> methods should be used for responsive template. Instead, you should use Shopware's auto loading mechanism.
The following example shows how template extension plugins need to be updated to achieve the best possible result for Shopware 5 templates.
The following source code was taken from the SwagExample1 plugin for Shopware 4, which displays a top seller slider and a banner in the article detail page:</p>

<h4 id="swagexample1/bootstrap.php">SwagExample1/Bootstrap.php</h4>

<pre><code class="language-php">&lt;?php
class Shopware_Plugins_Frontend_SwagExample1_Bootstrap extends Shopware_Components_Plugin_Bootstrap
{
    public function install()
    {
        $this-&gt;subscribeEvent('Enlight_Controller_Action_PostDispatchSecure_Frontend_Detail', 'onSecureDetailPostDispatch');

        $form = $this-&gt;Form();
        $form-&gt;setElement(
            'mediaselection',
            'mediaselection',
            ['label' =&gt; 'Media', 'value' =&gt; NULL]
        );

        return true;
    }

    public function onSecureDetailPostDispatch(Enlight_Event_EventArgs $arguments)
    {
        /**@var $controller Shopware_Controllers_Frontend_Listing*/
        $controller = $arguments-&gt;getSubject();
        $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/');
        $controller-&gt;View()-&gt;extendsTemplate('frontend/detail/example1.tpl');
        $controller-&gt;View()-&gt;mediaSelection = $this-&gt;Config()-&gt;mediaselection;
    }
}
</code></pre>

<h4 id="swagexample1/views/frontend/detail/example1.tpl">SwagExample1/Views/frontend/detail/example1.tpl</h4>

<pre><code class="language-html">{block name=&quot;frontend_detail_index_detail&quot;}
    {block name=&quot;frontend_detail_example&quot;}
        &lt;div class=&quot;example--own-topseller&quot;&gt;
            {block name=&quot;frontend_detail_example_headline&quot;}
                &lt;h1 class=&quot;own-topseller--headline&quot;&gt;My topseller&lt;/h1&gt;
            {/block}

            {block name=&quot;frontend_detail_example_img&quot;}
                &lt;img class=&quot;own-topseller--img&quot; src=&quot;{link file={$mediaSelection}}&quot; alt=&quot;Test&quot; /&gt;
            {/block}

            {block name=&quot;frontend_detail_example_topseller&quot;}
                &lt;div class=&quot;own-topseller--container&quot;&gt;
                    {action module=widgets controller=listing action=top_seller sCategory=3}
                &lt;/div&gt;
            {/block}
        &lt;/div&gt;
    {/block}
{/block}

</code></pre>

<p>The goal is to make this plugin compatible with both the new Shopware 5 and the old Shopware 4 templates. For this purpose, the following should be considered:</p>

<ul><li>Inside the <strong>PostDispatch</strong> event, we have to distinguish between the different template version and load the corresponding template files.</li>
<li>The <strong>extendsTemplate</strong> function should not be used in the new template, otherwise the plugin template cannot be overwritten by other templates.</li>
<li>In order for the plugin template to be easily extended by others, the template adjustments should be extracted into a separate file.</li>
</ul><p>First, the template structure is revised. The example1.tpl file is now divided into three new files:</p>

<ul><li>SwagExample1/Views/emotion/detail/example1.tpl (Entry point to extends the emotion template)</li>
<li>SwagExample1/Views/responsive/frontend/detail/index.tpl (Entry point to extends the responsive template)</li>
<li>SwagExample1/Views/common/frontend/swag_example1/detail_extension.tpl (Contains the source code for the extension)</li>
</ul><p>The new files contain the following source code:</p>

<h4 id="swagexample1/views/common/frontend/swag_example1/detail_extension.tpl">SwagExample1/Views/common/frontend/swag_example1/detail_extension.tpl</h4>

<pre><code class="language-html">{block name=&quot;frontend_detail_example&quot;}
    &lt;div class=&quot;example--own-topseller&quot;&gt;
        {block name=&quot;frontend_detail_example_headline&quot;}
            &lt;h1 class=&quot;own-topseller--headline&quot;&gt;My topseller&lt;/h1&gt;
        {/block}

        {block name=&quot;frontend_detail_example_img&quot;}
            &lt;img class=&quot;own-topseller--img&quot; src=&quot;{link file={$mediaSelection}}&quot; alt=&quot;Test&quot; /&gt;
        {/block}

        {block name=&quot;frontend_detail_example_topseller&quot;}
            &lt;div class=&quot;own-topseller--container&quot;&gt;
                {action module=widgets controller=listing action=top_seller sCategory=3}
            &lt;/div&gt;
        {/block}
    &lt;/div&gt;
{/block}
</code></pre>

<h4 id="swagexample1/views/emotion/frontend/detail/example1.tpl">SwagExample1/Views/emotion/frontend/detail/example1.tpl</h4>

<pre><code class="language-html">{block name=&quot;frontend_detail_index_detail&quot;}
    {include file=&quot;frontend/swag_example1/detail_extension.tpl&quot;}
{/block}
</code></pre>

<h4 id="swagexample1/views/responsive/frontend/detail/index.tpl">SwagExample1/Views/responsive/frontend/detail/index.tpl</h4>

<pre><code class="language-html">{extends file=&quot;parent:frontend/detail/index.tpl&quot;}

{block name=&quot;frontend_detail_index_detail&quot;}
    {include file=&quot;frontend/swag_example1/detail_extension.tpl&quot;}
{/block}
</code></pre>

<p><br><strong>Notice: Template extensions for the responsive template are loaded via the inheritance hierarchy based on the file system. Therefore, this template should be extends via {extends file = ".."}.</strong></p>

<p>The SwagExample1/Views/responsive/frontend/detail/index.tpl and SwagExample1/Views/emotion/frontend/detail/example1.tpl files serve only as entry points into the original template.
The source code for displaying the top seller sliders and the banner element, which was previously located directly in the extended template file, has now been made available globally in a separate template file, and is now simply included by both templates.
This has the following advantages:</p>

<ul><li>Avoid duplicate source code</li>
<li>Extensible plugin template for other developers</li>
</ul><p>Now only the <strong>Bootstrap.php</strong> logic has to be adapted, so that it loads the correct template directory, based on the version of the template currently used by the shop.
The new plugin <strong>Bootstrap.php</strong> class now looks like this:</p>

<pre><code class="language-php">&lt;?php

class Shopware_Plugins_Frontend_SwagExample1_Bootstrap extends Shopware_Components_Plugin_Bootstrap
{
    public function install()
    {
        $this-&gt;subscribeEvent('Enlight_Controller_Action_PostDispatchSecure_Frontend_Detail', 'onSecureDetailPostDispatch');

        $form = $this-&gt;Form();
        $form-&gt;setElement(
            'mediaselection',
            'mediaselection',
            ['label' =&gt; 'Media', 'value' =&gt; NULL]
        );

        return true;
    }

    public function onSecureDetailPostDispatch(Enlight_Event_EventArgs $arguments)
    {
        /**@var $controller Shopware_Controllers_Frontend_Listing*/
        $controller = $arguments-&gt;getSubject();

        $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/common/');

        if (Shopware()-&gt;Shop()-&gt;getTemplate()-&gt;getVersion() &gt;= 3) {
            $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/responsive/');
        } else {
            $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/emotion/');
            $controller-&gt;View()-&gt;extendsTemplate('frontend/detail/example1.tpl');
        }

        $controller-&gt;View()-&gt;mediaSelection = $this-&gt;Config()-&gt;mediaselection;
    }
}
</code></pre>

<ul><li>The &quot;Views/common/&quot; directory is always registered as a template directory. Templates inside this directory are now loaded for both template versions.</li>
<li>A template version check was added, so that only the corresponding view directory is loaded.</li>
<li>Responsive - Template files for the responsive template loaded automatically over the inheritance by using the same names. Therefore, only the template directory must registered here</li>
<li>Emotion - In the emotion template we can load the template extension like in Shopware 4. After the template directory is registered, the template file is loaded via the <strong>extendsTemplate</strong> call.</li>
</ul><p>__Notice: Do not use &quot;<em>default/&quot; or &quot;<em>emotion/&quot; at the beginning of the extend call. Use &quot;parent:&quot; instead.</em></em></p>

<p><strong>Notice: To allow other templates to easily extend your templates, you should provide your code in a separate file. Include that file in other templates, inside Smarty blocks, thus allowing different entry point.</strong></p>

<h2 id="uninstall">Uninstall</h2>

<p>During the uninstall process, the user can now be prompted which data he wishes to remove.
Existing <strong>uninstall()</strong> method should remove all data, and the new <strong>secureUninstall()</strong> method should only remove non-user related data.</p>

<h5>Bootstrap.php - How to use 'secureUninstall()'</h5>

<pre><code class="language-php">// Set the new secureUninstall capability
public function getCapabilities()
{
    return array(
        'install' =&gt; true,
        'enable' =&gt; true,
        'update' =&gt; true,
        'secureUninstall' =&gt; true
    );
}

// Remove all data
public function uninstall()
{
    $this-&gt;secureUninstall();
    $this-&gt;removeDatabase();
    return true;
}


// Remove only non-user related data.
public function secureUninstall()
{
    return true;
}
</code></pre>

<h3 id="less">Less</h3>

<p>Besides traditional CSS, Shopware 5 includes Less support in new templates. Less is a CSS pre-processor, which can be used when styling your Shopware 5 templates. Less is a very powerful tool, and Shopware 5 extends its default feature set by adding some commonly used functions.</p>

<p>For more information on how to use Less, have a look <a href="http://lesscss.org/">here</a>.</p>

<h4 id="integration">Integration</h4>

<p>Less files are loaded by creating a new event in the <strong>install</strong> method of our plugin.</p>

<h5>Bootstrap.php - Using .less files in responsive template</h5>

<pre><code class="language-php">/**
 * Registers all necessary events and hooks.
 */
private function subscribeEvents()
{
    // Subscribe the needed event for less merge and compression
    $this-&gt;subscribeEvent(
        'Theme_Compiler_Collect_Plugin_Less',
        'addLessFiles'
    );
}

/**
 * Provide the file collection for less
 *
 * @param Enlight_Event_EventArgs $args
 * @return \Doctrine\Common\Collections\ArrayCollection
 */
public function addLessFiles(Enlight_Event_EventArgs $args)
{
    $less = new \Shopware\Components\Theme\LessDefinition(
    //configuration
    array(),

        //less files to compile
        array(
            __DIR__ . '/Views/responsive/frontend/_public/src/less/all.less'
        ),

        //import directory
        __DIR__
    );

    return new Doctrine\Common\Collections\ArrayCollection(array($less));
}

</code></pre>

<h4 id="structure-convention">Structure convention</h4>

<p>Like in the example above, in most cases there is only one .less file to compile - the <strong>all.less</strong>. It includes additional files named by their content. Most likely the <strong>all.less</strong> file includes the <strong>modules.less</strong> and <strong>variables.less</strong> files, which are often needed by default. These files include additional files from same named directories, e.g. modules.less includes files from the directory called <strong>&quot;_modules/&quot;</strong>.</p>

<p>As an example, if the file contains styles for Shopware's checkout page, it would be called <strong>&quot;checkout.less&quot;</strong> and place in the _<strong>modules</strong> directory.
The files inside _<strong>variables/</strong> should only contain variable definitions made in Less.</p>

<table><thead><tr><th>Directory/File</th>
<th>Utility</th>
</tr></thead><tbody><tr><td>_modules</td>
<td>Contains less styles of modules</td>
</tr><tr><td>_variables</td>
<td>Contains less variables</td>
</tr><tr><td>all.less</td>
<td>Includes &quot;modules.less&quot; and &quot;variables.less&quot;</td>
</tr><tr><td>modules.less</td>
<td>Includes all files in &quot;_modules&quot;</td>
</tr><tr><td>variables.less</td>
<td>Includes all files in &quot;_variables&quot;</td>
</tr></tbody></table><h5>Example all.less</h5>

<pre><code class="language-less">@import &quot;modules&quot;;
</code></pre>

<h5>Example modules.less</h5>

<pre><code class="language-less">@import &quot;_modules/checkout&quot;;
</code></pre>

<h5>Example _modules/checkout.less</h5>

<pre><code class="language-less">.yourOwnSelector {
    width: 100%;
}
</code></pre>

<h4 id="breakpoint-sizes">Breakpoint sizes</h4>

<p>Our responsive template uses media queries with specific breakpoint, so you can implement different styles for different browser window sizes.</p>

<h5>structure.less - Less variables for the different device sizes</h5>

<pre><code class="language-less">@phoneLandscapeViewportWidth: 30em;     // 480px
@tabletViewportWidth: 48em;             // 768px
@tabletLandscapeViewportWidth: 64em;    // 1024px
@desktopViewportWidth: 78.75em;         // 1260px
</code></pre>

<h5>Example usage</h5>

<pre><code class="language-less">.myOwnElement {
    width: 90%;
}

@media screen and (min-width: @tabletViewportWidth) {
    .myOwnElement {
        width: 70%;
    }
}
</code></pre>

<h4 id="mixins">Mixins</h4>

<p>Each child theme of the Shopware responsive template has access to some very useful mixins like '.unitize()' or '.clearfix()'
A mixin is a useful function being used in our .less files.
E.g. our new &quot;unitize&quot; mixin can be used to calculate <strong>rem</strong> values, which we use in our new template, replacing <strong>px</strong> values.</p>

<h5>Example usage for unitize()</h5>

<pre><code class="language-less">.myOwnElement {
    //Would output font-size: 0.625rem;
    //First parameter is your desired px value, in this case 10px.
    //Second parameter is the base value which, in this case, means the default font-size of 16px.
    //You won't have to change the second parameter in most of the cases. The .unitize-method now calculates 10/16 = 0.625.
    //Third parameter is the actual style to be used
    .unitize(10, 16, font-size);

    //For more examples of &quot;unitize&quot; mixin usage, please refer to yourShopSystem/Themes/Frontend/Responsive/frontend/_public/src/less/_mixins/unitize.less
}
</code></pre>

<p>In __Themes/Frontend/Responsive/frontend/<em>public/src/less/<em>mixins</em></em> you can find other useful mixins provided by Shopware 5.</p>

<h4 id="messages">Messages</h4>

<p>If you want to display message to the shop customer, you can use the <strong>messages</strong> template file.
Examples:</p>

<h5>account/password.tpl - Display a success message.</h5>

<pre><code class="language-html">{include file=&quot;frontend/_includes/messages.tpl&quot; type=&quot;success&quot; content=&quot;{s name='PasswordInfoSuccess'}{/s}&quot;}
</code></pre>

<p><img src="message-success.png" alt="Success Message"></p>

<h5>account/orders.tpl - Display a warning message.</h5>

<pre><code class="language-html">{include file=&quot;frontend/_includes/messages.tpl&quot; type=&quot;warning&quot; content=&quot;{s name='OrdersInfoEmpty'}{/s}&quot;}
</code></pre>

<p><img src="message-warning.png" alt="Warning Message"></p>

<h5>blog/comment/form.tpl - Display an error message</h5>

<pre><code class="language-html">{include file=&quot;frontend/_includes/messages.tpl&quot; type=&quot;error&quot; content=&quot;{s name='BlogInfoFailureFields'}{/s}&quot;}
</code></pre>

<p><img src="message-error.png" alt="Error Message"></p>

<p>Additional documentation can be found in _<em>Themes/Frontend/Bare/frontend/<em>includes/messages.tpl</em></em>.</p>

<h4 id="other-things">Other things</h4>

<ul><li>Use the new CSS classes, e.g. &quot;btn is--primary&quot;, &quot;is--bold&quot; or &quot;has--border&quot;. For further information, have a look at the new style tile.</li>
<li>Use the CSS class name convention (&quot;<parent>--<child>&quot; , e.g. &quot;abo--detail-container &gt; detail-containerimage&quot;)</child></parent></li>
<li>If possible, build small images and icons with CSS</li>
</ul><h3 id="javascript">Javascript</h3>

<p>Javascript can now be merged and compressed automatically by Shopware 5.</p>

<h4 id="integration-0">Integration</h4>

<h5>Bootstrap.php - Using Javascript merge and compression</h5>

<pre><code class="language-php">/**
 * Registers all necessary events and hooks.
 */
private function subscribeEvents()
{
    // Subscribe the needed event for js merge and compression
    $this-&gt;subscribeEvent(
        'Theme_Compiler_Collect_Plugin_Javascript',
        'addJsFiles'
    );
}

/**
 * Provide the file collection for js files
 *
 * @param Enlight_Event_EventArgs $args
 * @return \Doctrine\Common\Collections\ArrayCollection
 */
public function addJsFiles(Enlight_Event_EventArgs $args)
{
    $jsFiles = array(__DIR__ . '/Views/responsive/frontend/_public/src/js/script.js');
    return new Doctrine\Common\Collections\ArrayCollection($jsFiles);
}
</code></pre>

<h4 id="jquery-plugins">jQuery plugins</h4>

<p>Shopware 5 already includes several jQuery plugins you can use to implement useful features, like sliders or search fields. All of these can be found in the 'Themes/Frontend/Responsive/frontend/_public/src/js/' directory.</p>

<h4 id="write-own-jquery-plugins">Write own jQuery plugins</h4>

<p>If you want to write your own jQuery plugin, you should use our new plugin base class. It provides all the basic operations every jQuery plugin needs to have.</p>

<h5>_public/src/js/jquery.plugin-base.js - Example how to register and call a jquery-plugin</h5>

<pre><code class="language-javascript">// Register your plugin
$.plugin('yourName', {
   defaults: { exampleValue: 'value' },

   init: function() {
       // ...initialization code

       //The applyDataAttributes function merges data attributes into plugin options. Example element: &lt;div class=&quot;test&quot; data-exampleValue=&quot;value2&quot;&gt;&lt;/div&gt;
       //The default &quot;exampleValue&quot; variable will be overwritten with &quot;value2&quot;.
       //This value is then available in this.opts.exampleValue variable

           this.applyDataAttributes();
   },

   destroy: function() {
     // ...your destruction code

     // Use the force! Use the internal destroy method.
     me._destroy();
   }
});

// Call the plugin
$('.test').yourName();
</code></pre>

<h4 id="data-attributes">Data attributes</h4>

<p>In Shopware 5, Javascript files are no longer parsed by Smarty. To assign a Smarty variable value to a Javascript variable, use the HTML5 Data attributes (accessible in Javascript with &quot;me.applyDataAttributes()&quot;). Refer to the previous code snippet for an usage example.</p>

<h3 id="other">Other</h3>

<p>Implement as many (useful) Smarty blocks as possible, so your templates are extensible.</p>

<h2 id="search-bundle">Search Bundle</h2>

<p>In listings, you should use the new listing logic (Conditions, ConditionHandler, Facet, FacetHandler, etc.).
Keep the required additional data in mind, e.g. the new view variable &quot;pageSizes&quot;.</p>

<h2 id="updating-an-example-plugin">Updating an example plugin</h2>

<p>In the following steps we'll update our &quot;SwagExample1&quot; Plugin to run with Shopware 5 and fully responsive.</p>

<h3 id="creating-directory-structure">Creating directory structure</h3>

<p>In the first step of updating our plugin to be compatible with Shopware 5, we'll simply create the new directory structure. The current directory structure looks like this:
<img src="current-structure.png" alt="Current structure"></p>

<p>Now we simply create two new directories inside of &quot;Views&quot;:
<strong>emotion</strong> and <strong>responsive</strong>.
Additionally, we move the existing &quot;frontend&quot; directory into the &quot;emotion&quot; directory.</p>

<p>All we need to do for now is create some additional directories inside the <strong>responsive</strong> directory.
Your directory structure should look like this:</p>

<pre><code>Views/
|-&gt;responsive/
  |-&gt;frontend/
  |-&gt;_public/
     |-&gt;src/
       |-&gt;less/
</code></pre>

<h3 id="implement-new-less-structure">Implement new Less structure</h3>

<p>As mentioned in the tutorial, our new CSS/Less, Javascript and images files will be placed inside the _<strong>public</strong> directory, which contains the <strong>src</strong> directory. The <strong>src</strong> directory contains the <strong>less</strong> directory.</p>

<p>At first we start by creating a file called <strong>all.less</strong> inside the <strong>less</strong> directory, which has to be included in PHP now. This can be done using the new <strong>&quot;Theme_Compiler_Collect_Plugin_Less&quot;</strong> event, which should be registered in the plugin's <strong>install</strong> method:</p>

<h4 id="registering-the-new-event-in-the-bootstrap.php">Registering the new event in the Bootstrap.php</h4>

<pre><code class="language-php">public function install()
{
    ...
    // Register your custom Less files, so that they are processed into CSS and included on your template
    $this-&gt;subscribeEvent(
        'Theme_Compiler_Collect_Plugin_Less',
        'addLessFiles'
    );
    ...
}
...

/**
 * Provide the file collection for Less
 */
public function addLessFiles(Enlight_Event_EventArgs $args)
{
    $less = new \Shopware\Components\Theme\LessDefinition(
    //configuration
        array(),
        //less files to compile
        array(
            __DIR__ . '/Views/responsive/frontend/_public/src/less/all.less'
        ),

        //import directory
        __DIR__
    );

    return new Doctrine\Common\Collections\ArrayCollection(array($less));
}
</code></pre>

<p>In the <strong>addLessFiles</strong> method should return a Doctrine array collection containing the plugin's Less files. The Shopware 5 core will automatically process them into CSS files, and merge them together with the theme's standard CSS content (also processed from Less). This unified file will be minimized and served to the browser when a page is requested. After (re)installing the plugin and refreshing the theme cache, your plugin's <strong>all.less</strong> file should be included in future requests.</p>

<p>As mentioned in the tutorial, the <strong>all.less</strong> is needed to include other Less files. Therefore, we new create a file called <strong>modules.less</strong> and a directory called _<strong>modules</strong>. The newly created <strong>modules.less</strong> file needs to be imported in <strong>all.less</strong></p>

<h4 id="all.less">all.less</h4>

<pre><code class="language-less">@import &quot;modules&quot;;
</code></pre>

<p>In turn, the <strong>modules.less</strong> file should import all the .less files that will be created inside of the _<strong>modules</strong> directory. There files will contain the actual Less code, and should be grouped by their usage in the frontend.
E.g. as we need styles for the detail page, we will create a new file called <strong>detail.less</strong> inside of the _<strong>modules</strong> directory.</p>

<h4 id="modules.less">modules.less</h4>

<pre><code class="language-less">@import &quot;_modules/detail&quot;;
</code></pre>

<p>The <strong>detail.less</strong> will contain the actual styling info.
In the old <strong>example1.tpl</strong> were some inline styles for the img tag.
Let's replace them by using the new class of the img element:</p>

<h4 id="detail.less">detail.less</h4>

<pre><code class="language-less">.own-topseller--img {
    width: 50%;
    display: block;
}
</code></pre>

<h3 id="additional-changes">Additional changes</h3>

<p>The plugin is now Shopware 5 compatible and our template changes responsive.
The current implementation can be improved by wrapping the HTML code in Smarty blocks, so that these template changes can be extensible by other plugins.
By installing the plugin and opening a detail page, you will see the changes introduced by the plugin.</p>

<p>Below is a list of all files that have been changed:</p>

<h4 id="bootstrap.php">Bootstrap.php</h4>

<pre><code class="language-php">&lt;?php

class Shopware_Plugins_Frontend_SwagExample1_Bootstrap extends Shopware_Components_Plugin_Bootstrap
{
    public function install()
    {
        $this-&gt;subscribeEvent('Enlight_Controller_Action_PostDispatchSecure_Frontend_Detail', 'onSecureDetailPostDispatch');

        // Subscribe the needed event for less merge and compression
        $this-&gt;subscribeEvent(
            'Theme_Compiler_Collect_Plugin_Less',
            'addLessFiles'
        );

        $form = $this-&gt;Form();
        $form-&gt;setElement(
            'mediaselection',
            'mediaselection',
            ['label' =&gt; 'Media', 'value' =&gt; NULL]
        );

        return true;
    }


    public function onSecureDetailPostDispatch(Enlight_Event_EventArgs $arguments)
    {
        /**@var $controller Shopware_Controllers_Frontend_Listing*/
        $controller = $arguments-&gt;getSubject();

        $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/common/');

        $template = Shopware()-&gt;Shop()-&gt;getTemplate();
        if ($template-&gt;getVersion() &gt;= 3) {
            $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/responsive/');
        } else {
            $controller-&gt;View()-&gt;addTemplateDir($this-&gt;Path() . 'Views/emotion/');
            $controller-&gt;View()-&gt;extendsTemplate('frontend/detail/example1.tpl');
        }

        $controller-&gt;View()-&gt;mediaSelection = $this-&gt;Config()-&gt;mediaselection;
    }

    /**
     * Provide the file collection for less
     */
    public function addLessFiles(Enlight_Event_EventArgs $args)
    {
        $less = new \Shopware\Components\Theme\LessDefinition(
        //configuration
            array(),
            //less files to compile
            array(
                __DIR__ . '/Views/responsive/frontend/_public/src/less/all.less'
            ),

            //import directory
            __DIR__
        );

        return new Doctrine\Common\Collections\ArrayCollection(array($less));
    }
}
</code></pre>

<h4 id="views/responsive/frontend/_public/src/less/all.less">Views/responsive/frontend/_public/src/less/all.less</h4>

<pre><code class="language-less">@import &quot;modules&quot;;
</code></pre>

<h4 id="views/responsive/frontend/_public/src/less/modules.less">Views/responsive/frontend/_public/src/less/modules.less</h4>

<pre><code class="language-less">@import &quot;_modules/detail&quot;;
</code></pre>

<h4 id="views/responsive/frontend/_public/src/less/_modules/detail.less">Views/responsive/frontend/_public/src/less/_modules/detail.less</h4>

<pre><code class="language-less">.own-topseller--img {
    width: 50%;
    display: block;
}

@media screen and (min-width: @phoneLandscapeViewportWidth) {
    //Styles only being used when the size of the screen is at least 480px.
    //All the sizes are mentioned in yourShopSystem/Themes/Frontend/Responsive/frontend/_public/src/less/_variables/structure.less
}

@media screen and (min-width: @desktopViewportWidth) {
    //Styles only being used when the size of the screen is at least 1260px.
    //All the sizes are mentioned in yourShopSystem/Themes/Frontend/Responsive/frontend/_public/src/less/_variables/structure.less
}
</code></pre>

<h4 id="swagexample1/views/common/frontend/swag_example1/detail_extension.tpl-0">SwagExample1/Views/common/frontend/swag_example1/detail_extension.tpl</h4>

<pre><code class="language-html">{block name=&quot;frontend_detail_example&quot;}
    &lt;div class=&quot;example--own-topseller&quot;&gt;
        {block name=&quot;frontend_detail_example_headline&quot;}
            &lt;h1 class=&quot;own-topseller--headline&quot;&gt;My topseller&lt;/h1&gt;
        {/block}

        {block name=&quot;frontend_detail_example_img&quot;}
            &lt;img class=&quot;own-topseller--img&quot; src=&quot;{link file={$mediaSelection}}&quot; alt=&quot;Test&quot; /&gt;
        {/block}

        {block name=&quot;frontend_detail_example_topseller&quot;}
            &lt;div class=&quot;own-topseller--container&quot;&gt;
                {action module=widgets controller=listing action=top_seller sCategory=3}
            &lt;/div&gt;
        {/block}
    &lt;/div&gt;
{/block}
</code></pre>

<h4 id="swagexample1/views/emotion/frontend/detail/example1.tpl-0">SwagExample1/Views/emotion/frontend/detail/example1.tpl</h4>

<pre><code class="language-html">{block name=&quot;frontend_detail_index_detail&quot;}
    {include file=&quot;frontend/swag_example1/detail_extension.tpl&quot;}
{/block}
</code></pre>

<h4 id="swagexample1/views/responsive/frontend/detail/index.tpl-0">SwagExample1/Views/responsive/frontend/detail/index.tpl</h4>

<pre><code class="language-html">{extends file=&quot;parent:frontend/detail/index.tpl&quot;}

{block name=&quot;frontend_detail_index_detail&quot;}
    {include file=&quot;frontend/swag_example1/detail_extension.tpl&quot;}
{/block}
</code></pre>

<h4 id="new-directory-structure">New directory structure</h4>

<p><img src="new-structure.png" alt="New directory structure"></p>

<h2 id="questions?">Questions?</h2>

<p>For further questions you should read the complete Shopware 5 upgrade guide.</p>

                    </div>

        <div class="clearfix"></div>
    </div>

    <!-- Footer -->
    <footer class="main-footer"><div class="footer--container">
            <div class="copyright">2017  shopware AG - All rights reserved</div>
            <div class="footer--links">
                <a href="https://en.shopware.com/legal-notice" target="_blank" title="Imprint">Imprint</a> |
                <a href="https://en.shopware.com/gtc" target="_blank" title="Terms and Conditions">Terms and Conditions</a>
            </div>
        </div>
    </footer></div>

<script src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/languages/less.min.js"></script><script src="https://developers.shopware.com/assets/js/anchor.min.1501499833.js"></script><script src="https://developers.shopware.com/assets/js/jquery.expandCode.1501499833.js"></script><script src="https://developers.shopware.com/assets/js/jquery.toc.1501499833.js"></script><script src="https://developers.shopware.com/assets/js/jquery.offcanvas.1501499833.js"></script><script src="https://developers.shopware.com/assets/js/app.1501499833.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><!-- Google Tag Manager --><noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5ZGXBG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
            '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5ZGXBG');</script><!-- End Google Tag Manager --></body></html>