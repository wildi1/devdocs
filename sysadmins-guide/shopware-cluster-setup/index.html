<!DOCTYPE html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Shopware cluster setup</title><meta name="description" content="Shopware cluster setup"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="theme-color" content="#26556f"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:700,600,400" type="text/css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/docsearch.min.1501499835.css"><link rel="stylesheet" href="https://developers.shopware.com/assets/css/basic.1501499835.css" media="screen"><link rel="alternate" type="application/atom+xml" href="https://developers.shopware.com/blog/atom.xml" title="Shopware Developer blog feed"></head><body>
<div class="wrapper">

    <header class="header--main"><a href="https://developers.shopware.com/" class="offcanvas--trigger" title="Navigation">
            <i class="icon-list"></i>
        </a>

        <a href="https://developers.shopware.com/" title="Shopware Developer Documentation" class="logo">
            <img src="https://developers.shopware.com/assets/img/logo-devdocs.1501499835.png"></a>

    </header><div id="searchBox">
        <form action="#" method="get" id="search-form">
            <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off"><button id="search-action"></button>
        </form>
    </div>

    <nav class="navi--main" data-offcanvas="true"><div class="navi--content">
            <ul class="navi--tree"><li class="navi--chapter">
                    <a href="/developers-guide/" class="navi--link has--children">
                       Developer Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/plugin-guide/">
                                Developing plugins
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-quick-start/">
                                                Quick start guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/example-plugin/">
                                                Storefront extension
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/controller/">
                                                Controllers
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/event-guide/">
                                                Events
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/services/">
                                                Services
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-configuration/">
                                                Plugin configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-testing/">
                                                Plugin testing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-license/">
                                                Plugin License
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-plugin-update-guide/">
                                                Plugin update guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-extension-by-plugin/">
                                                Extend an existing plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-system/">
                                                The 5.2 Plugin System
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/cheat-sheet/">
                                                Cheat-Sheet
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/phpstorm/">
                                                Setting up PhpStorm
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-upgrade-guide-for-developers/">
                                                Upgrade Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-performance-for-devs/">
                                                Performance Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/debugging/">
                                                Debugging Shopware
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/elasticsearch/">
                                                Elasticsearch
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-config/">
                                                config.php settings
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/06/09/understanding-the-shopware-hook-system/">
                                                Hooks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/blog/2015/08/11/the-shopware-seo-engine/">
                                                SEO Engine
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-media-service/">
                                                MediaService
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/http-cache/">
                                                HTTP Cache
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/address-management-guide/">
                                                Address Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/attribute-system/">
                                                Attributes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/csrf-protection/">
                                                CSRF Protection
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/dic-tags/">
                                                Dependency Injection Tags
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-cli-commands/">
                                                CLI commands
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-search-bundle/">
                                                SearchBundle
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/shopware-5-core-service-extensions/">
                                                Service extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/entity-relationship-model/">
                                                Entity relationship model
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/password-encoder/">
                                                Password encoder
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/global-variables-in-templates/">
                                                Global variables in templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/media-optimizer/">
                                                Media Optimizer
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/concept-cart-bundle/">
                                                Cart Concept
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/customer-streams-extension/">
                                                Customer - Search &amp; Streams
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/custom-shopping-world-elements/">
                                                Create custom shopping worlds elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/digital-publishing-elements/">
                                                Create custom digital publishing elements
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/emotion-preset-plugin/">
                                                Create custom emotion preset plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-lastregistrations-widget/">
                                                Create your own backend widget
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/payment-plugin/">
                                                Create custom payment plugin
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/plugin-slugify/">
                                                Create custom url slugger
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/risk-rules/">
                                                Risk Rules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/vagrant-phpstorm/">
                                                Vagrant and PHPStorm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/backend-and-extjs/">
                                Backend and ExtJS
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-extension/">
                                                Extending the backend
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/basics/">
                                                Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing/">
                                                Listing
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/detail/">
                                                Detail
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/associations/">
                                                Associations
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/listing-extensions/">
                                                Listing extensions
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-components/batch-processes/">
                                                Batch processes
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/lightweight-backend-modules/">
                                                Lightweight backend modules
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/backend-icons/">
                                                Backend icon set
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/backend-escaping/">
                                                Backend escaping
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/developers-guide/rest/">
                                REST API
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/">
                                                REST API Basics
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/article/">
                                                The article resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/customer/">
                                                The customer resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/order/">
                                                The order resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/translation/">
                                                The translation resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/category/">
                                                The category resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/media/">
                                                The media resource
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/merge-mode/">
                                                The merge mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/cache/">
                                                The cache resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/batch/">
                                                The batch mode
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/customer-streams/">
                                                Customer Streams
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/filter/">
                                                Filter
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/examples/payment/">
                                                Payment
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/models/">
                                                Models
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/plugin-api-extension/">
                                                Create your own endpoint
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/developers-guide/rest-api/extend-api-resource/">
                                                Extend a REST API resource
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/designers-guide/" class="navi--link has--children">
                       Frontend Guides
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/theme-guide/">
                                Developing Themes
                            </a>

                                                            <ul class="navi--sub-tree is--numbered"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/theme-startup-guide/">
                                                Theme Startup Guide
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/getting-started/">
                                                Getting started with templating
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/smarty/">
                                                Getting started with Smarty
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/less/">
                                                Getting started with LESS
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/css-and-js-files-usage/">
                                                Using CSS and JavaScript
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-theme-default-components/">
                                                Using the theme default components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-statemanager-and-pluginbase/">
                                                jQuery plugins &amp; the StateManager
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/configuration-using-theme-php/">
                                                Custom theme configuration
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/preparing-themes-for-the-community-store/">
                                                Preparing themes for the community store
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/general-resources/">
                                General Resources
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/eslint-for-plugins/">
                                                ESLint for plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/javascript-coding-style/">
                                                Javascript Coding Style
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/styletile/">
                                                UI Components
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/snippets/">
                                                Snippet Management
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/datepicker/">
                                                Datepicker
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/external-resources/">
                                                Embedding external resources
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/responsive-images/">
                                                Responsive images
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/best-practice-theme-development/">
                                                Using the Grunt watcher
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/modify-jquery-plugins/">
                                                Modify jQuery plugins
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-bower/">
                                                Managing dependencies with Bower
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/managing-third-party-dependencies-with-npm/">
                                                Managing dependencies with NPM
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/legacy-template-development-in-shopware-5/">
                                                Legacy template development
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/how-to-use-karma/">
                                                Testing with Karma
                                            </a>
                                        </li>
                                                                    </ul></li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link has--children" href="/designers-guide/tutorials/">
                                Tutorials
                            </a>

                                                            <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/find-smarty-blocks/">
                                                How to find smarty blocks
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-templates/">
                                                Adding custom templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-listing-page/">
                                                Example: Custom listing page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/custom-detail-page/">
                                                Example: Custom Detail page
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/edit-newsletter-and-document-templates/">
                                                Edit newsletter and document templates
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/google-pagespeed-best-practise/">
                                                Google PageSpeed
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/browser-notice/">
                                                Outdated browser notification
                                            </a>
                                        </li>
                                                                            <li class="navi--sub-chapter">
                                            <a class="navi--link" href="/designers-guide/range-slider-algorithm/">
                                                Range slider algorithm
                                            </a>
                                        </li>
                                                                    </ul></li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/contributing/" class="navi--link has--children">
                       Contributing
                    </a>

                                        <ul class="navi--sub-tree is--bulleted"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/contributing-code/">
                                Contributing Code
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/contribution-guideline/">
                                Contribution Guideline
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/developers-guide/coding-standards/">
                                Coding Standards
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/contributing/irc/">
                                IRC Channel
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter is--active">
                    <a href="/sysadmins-guide/" class="navi--link is--active has--children">
                       System Guides
                    </a>

                                        <ul class="navi--sub-tree"><li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/system-requirements/">
                                System requirements
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/installation-guide/">
                                Installation Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/update-guide/">
                                Update Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">
                                Performance Guide
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/elasticsearch-setup/">
                                Elasticsearch setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/varnish-setup/">
                                Varnish setup
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter">

                            <a class="navi--link" href="/sysadmins-guide/sessions/">
                                Sessions
                            </a>

                                                    </li>
                                                <li class="navi--sub-chapter is--active">

                            <a class="navi--link is--active" href="/sysadmins-guide/shopware-cluster-setup/">
                                Cluster setup
                            </a>

                                                    </li>
                                            </ul></li>

                
                <li class="navi--chapter">
                    <a href="/blog/" class="navi--link">
                       Blog
                    </a>

                                    </li>

                            </ul></div>
    </nav><div class="devdocs content">

        <section id="search-results" style="display: none;"><h2 class="search-results--headline" id="search-results">Search results</h2>

            <div class="entries"></div>
        </section><div class="inner-container">

            <div class="info">

                
                                <a class="edit-on-github" href="https://github.com/shopware/devdocs/blob/master/source/sysadmins-guide/shopware-cluster-setup/index.md" target="_blank"><i class="icon-github"></i> Edit this page on GitHub</a>
                
            </div>

                        <h1>
                Shopware cluster setup
            </h1>
            
            <p>Installing and running Shopware on a single server LAMP stack is easy to accomplish and a common solution for small and
mid size customers. When it comes to high performance and high reliability, however, having a clustered, redundant
setup is inevitable.</p>

<p>The following document will describe ways to cluster Shopware as well as considerations related to running Shopware
in a clustered setup.</p>

<div class="alert alert-warning">
Clustering is always highly individual and depends on the customer's requirements as well as the functional scope of the shop. For this reason every project will need to adjust the suggestions of this document for the actual hosting circumstances and customer / deploment workflows.
</div>

<div class="toc-list"></div>

<h2 id="what-is-clustering?">What is clustering?</h2>

<p>Generally speaking, clustering is a way to link multiple computers for a certain purpose. Usually this purpose is to increase
availability and / or performance of the setup and has several benefits:</p>

<ul><li>you can introduce redundancy for any single component (e.g. cache, appserver or database). Even if a component
fails, the shop will still work, as there is no &quot;single point of failure&quot;</li>
<li>the load (i.e. the users) can be distributed across the cluster. So there is not a single appserver that will
need to handle all users - but all users are distributed across all available appservers.</li>
<li>scaling the setup becomes easier: As any component is layed out in a redundant manner, you can easily add another
varnish server or appserver on the fly once your shop is confronted with more traffic (e.g. after an TV advertisement).</li>
</ul><h2 id="shopware-cluster-setup">Shopware cluster setup</h2>

<p>The following schema shows a simplified cluster setup. The components will be discussed in detail below.
<img src="/sysadmins-guide/shopware-cluster-setup/img/setup.svg" alt="server setup overview"></p>

<h3 id="load-balancer-(lb)">Load Balancer (LB)</h3>

<p>The load balancer is the foremost instance in every cluster setup. It will handle all customer requests and dispatch
them to one of the varnish cache instances.</p>

<p>Responsibility:</p>

<ul><li>SSL offloading</li>
<li>equal distribution of the traffic across all caches / appservers</li>
</ul><p>Software to run:</p>

<ul><li>Nginx (TLS offloading as well as load balancing)</li>
</ul><p>Scaling:</p>

<ul><li>second load balancer as failover</li>
<li>possibly floating IP and health checks for automated failover</li>
</ul><h3 id="varnish-servers">Varnish servers</h3>

<p>If stand alone caches are required, Shopware recommends Varnish, as there is a <a href="/sysadmins-guide/varnish-setup/">varnish configuration</a>
available.</p>

<p>Responsibility:</p>

<ul><li>caching - reduce load on database and appserver</li>
</ul><p>Software to run:</p>

<ul><li>Varnish 4</li>
</ul><p>Scaling:</p>

<ul><li>scales horizontally (numerous cache server possible)</li>
</ul><h3 id="appserver">Appserver</h3>

<p>An appserver runs the actual Shopware application and handles all requests which could not be handled by the cache
before:</p>

<p>Responsibility:</p>

<ul><li>handle user requests</li>
<li>the shop itself</li>
</ul><p>Software to run:</p>

<p>See: <a href="/sysadmins-guide/system-requirements/">system requirements</a></p>

<ul><li>Apache</li>
<li>PHP</li>
<li>latest version of Shopware (synced from the admin server)</li>
</ul><p>Scaling:</p>

<ul><li>scales horizontally (numerous appserver possible)</li>
</ul><h3 id="admin-server">Admin server</h3>

<p>The admin server is an appserver dedicated to the Shopware back office. It is also the leading appserver - all code changes
(e.g. deployment) happen on the admin server and are synced to the appservers. Furthermore all periodic tasks should be
run here.</p>

<p>Responsibility:</p>

<ul><li>serving of /backend (the back office)</li>
<li>Cronjobs</li>
<li>Jumphost</li>
<li>Deployment</li>
</ul><p>Software to run:</p>

<p>See: <a href="/sysadmins-guide/system-requirements/">system requirements</a></p>

<ul><li>Apache</li>
<li>PHP</li>
<li>latest version of Shopware</li>
</ul><h3 id="database">Database</h3>

<p>The database is the central persistent storage of all shop related data.</p>

<p>Responsibility:</p>

<ul><li>Holds all persistent data, e.g. articles, orders, customers</li>
</ul><p>Software to run:</p>

<ul><li>MariaDB &gt;= 10 (MySQL compatible database engine)</li>
</ul><p>Scaling:</p>

<ul><li>replication master/slave</li>
<li>cluster like percona / galera</li>
</ul><h3 id="memcache">Memcache</h3>

<p>For high performance setups, we recommend to store the sessions in memcache instead of the database (which is Shopware's
default behaviour). See <a href="/sysadmins-guide/memcached-as-session-handler/">setup description here</a>.</p>

<p>Responsibility:</p>

<ul><li>Store sessions</li>
</ul><p>Scaling:</p>

<ul><li>memcache.session_redundancy</li>
<li>solutions like repcache available</li>
</ul><h3 id="elasticsearch">Elasticsearch</h3>

<p>Elasticsearch is a so called &quot;no sql&quot; storage, a non relational database engine, which is very efficient in searching
and filtering big catalogues. For that reason it can optionally be used, if you have many articles in your shop
or if there are special requirements for filtering and searching. Shopware generally recommends using Elasticsearch
if more then ~140000 articles are in place. Even with less articles your overall system performance might profit from
using Elasticsearch, as filtering and search queries will usually generate quite some load on the database and
have a low cache hit rate.
Additional information regarding <a href="/sysadmins-guide/elasticsearch-setup/">Elasticsearch are available here</a>.</p>

<p>Responsibility:</p>

<ul><li>Search and filter articles quickly</li>
<li>reduce load on database engine</li>
</ul><p>Software to run:</p>

<ul><li>Elasticsearch &gt;= 2.0</li>
</ul><p>Scaling:</p>

<ul><li>scales horizontally (numerous ES server possible)</li>
</ul><h3 id="images">Images</h3>

<p>Images are usually uploaded on the admin server - but need to be available on all appservers as well. Usually syncing
(duplicating) the images is not to be recommended for larger setups, so there are alternatives in place:</p>

<ul><li>Shopware media service: The <a href="/developers-guide/shopware-5-media-service/">shopware media services</a> enables you, to use
external storages like Amazon S3. A proof of concept implementation for S3 is
<a href="https://github.com/ShopwareLabs/SwagMediaS3">available on github</a>. Other backend are possible through the filesystem
abstraction layer &quot;<a href="http://flysystem.thephpleague.com/">flysystem</a>&quot;, e.g. the <a href="https://github.com/shopwareLabs/SwagMediaSftp">SFTP adapter</a>.</li>
<li>Network storages: Network storages like NFS are still very common to share images and other files across multiple
appservers. Please be aware, that NFS can have a massive performance impact, so Shopware does not recommend to use NFS
other than for images.</li>
</ul><h2 id="variations">Variations</h2>

<p>There is not &quot;the one and only&quot; way to build a cluster. The layout of the cluster should be adjusted to the needs and
budget of the customer. For that reason there are a lot of variations in the setup that should be considered:</p>

<h3 id="caching-on-the-appserver">Caching on the appserver</h3>

<p>In some cases you might want to consider moving the cache layer to the appservers themselves. In that case the
appserver would include varnish, apache and the Shopware application. This will keep the overal infrastructure
smaller, but will force you to optimize the appserver for varnish <em>and</em> the webserver / application.</p>

<p>As an alternative you could also remove the varnish cache entirely and only rely on Shopware's built in HTTP cache.
If you are using many uncached ESI tags or uncached pages in general, this might even be beneficial, as Shopware
has some optimizations regarding the handling of ESI tags from within the built in HTTP cache. Please notice, that
this will force you to optimize for appserver <em>and</em> built in cache.</p>

<h3 id="sessions">Sessions</h3>

<p>Shopware handles sessions in the database by default. As this is not recommended for frontend sessions in a
high performance setup, using memcached instead was discussed before. In some cases, the memcached instance can
run alongside with other services like the load balancer, varnish or elastic search, if used.
If memcached is not an option in your case, using redis or even dedicated databases are possible by providing
custom session backends.</p>

<h2 id="additional-topics-to-be-aware-of">Additional topics to be aware of</h2>

<p>Clustering usually has quite some implications regarding the &quot;single source of truth&quot; in the setup. This especially applies
for local caches (e.g. APCu, proxy caches, generated attribute models), locally generated files (e.g. user upload)
and the sourcecode itself.</p>

<h3 id="invalidating-caches">Invalidating caches</h3>

<p>Since Shopware 5.2.0 you are able to configure multiple HTTP reverse proxies (e.g. varnish). So whenever the HTTP cache
is cleared or certain pages needs to be invalidated, Shopware will distribute this BAN and PURGE requests to all configured
caches.</p>

<p>This does not yet apply for clearing caches like attribute cache, proxy caches, object caches etc. You can clear those caches
using the <a href="/developers-guide/rest-api/api-resource-cache/">cache endpoint of the Shopware REST API</a>.</p>

<h3 id="uploads">Uploads</h3>

<p>Usually content is generated in and distributed by the admin server. The configured file syncs and media shares will
ensure, that all appservers to have access to this information. If you are using plugins that allow customers
to upload files in the shop frontend, the uploaded files will not be available for all other appservers automatically.
In those cases, you need to make sure, that the uploaded files are shared using CDN, shared storages or other syncing
mechanisms.</p>

<h3 id="adminserver">Adminserver</h3>

<p>Usually the shopware backoffice is available at <code>http://my-shop.com/backend</code>. Many customers reason, that introducing
a rule on the load balancer, which redirects all <code>backend/*</code> traffic to the admin server will be sufficient.
This is not always the case: The shopware backoffice will dynamically load files from other locations such as
<code>vendor/*</code> or <code>themes/*</code>. If your regular appservers are down for maintanance or other reasons, these requests will
fail if your load balancer rule is too naive.
For that reason we recommend, having a separate virtual host for your backoffice, such as <code>http://admin.my-shop.com</code>.
This way the backoffice will fetch all required files from that specific virtual host - and you can easily configure
your load balancer correspondingly.</p>

<h3 id="syncing">Syncing</h3>

<p>After deploying Shopware from VCS, installing plugins or generating themes from the admin panel the file base of the
admin server should be synced to all the appservers. <code>rsync</code> is a commonly used tool for this kind of task -
but you could also consider using <a href="https://github.com/axkibe/lsyncd">lsyncd</a>, which is an extension to <code>rsync</code> and
watches and syncs directories automatically.
As most shop setups are quite individual and will include custom plugins, there is no finite list of directories that needs
to be synced. Generally all files / directories of the Shopware setup should be synced across the appservers.
The following directories, however, need special treatment:</p>

<p><strong>No syncing</strong>:</p>

<ul><li>
<code>/var/cache</code>: Handled individually on every appserver, no syncing</li>
<li>
<code>/web</code>: Handled individually on every appserver, no syncing needed as of Shopware 5.2</li>
</ul><p><strong>Larger directories</strong>:</p>

<ul><li>
<code>/files</code>: Synced to each appserver or shared storage. Depends on installed plugins  and used Shopware featured such as ESD etc.</li>
<li>
<code>/media</code>: see <a href="#images">above</a>
</li>
</ul><p><strong>Directories that might change during runtime</strong>:</p>

<ul><li>
<code>/engine/Shopware/Plugins</code>: Changed when plugins are installed from the admin panel</li>
<li>
<code>/themes/Frontend</code>: Changed when new themes are created from the admin panel</li>
<li>
<code>/media</code>: Changed when new images / videos / media are uploaded in the admin panel</li>
<li>
<code>/files</code>: Changed when ESD items are uploaded or order documents are generated</li>
</ul><h2 id="additional-resources">Additional resources</h2>

<ul><li>
<a href="/sysadmins-guide/system-requirements/">Shopware system requirements</a>
</li>
<li>
<a href="/sysadmins-guide/shopware-5-performance-for-sysadmins/">Performance tips for sysadmins</a>
</li>
<li>
<a href="/sysadmins-guide/elasticsearch-setup/">Elasticsearch configuration</a>
</li>
<li>
<a href="/sysadmins-guide/varnish-setup/">Varnish configuration</a>
</li>
<li>
<a href="/sysadmins-guide/memcached-as-session-handler/">Memcached configuration</a>
</li>
<li>
<a href="/developers-guide/shopware-5-media-service/#example-migrating-all-media-file">Using Amazon S3 for images</a>
</li>
</ul></div>

        <div class="clearfix"></div>
    </div>

    <!-- Footer -->
    <footer class="main-footer"><div class="footer--container">
            <div class="copyright">2017 © shopware AG - All rights reserved</div>
            <div class="footer--links">
                <a href="https://en.shopware.com/legal-notice" target="_blank" title="Imprint">Imprint</a> |
                <a href="https://en.shopware.com/gtc" target="_blank" title="Terms and Conditions">Terms and Conditions</a>
            </div>
        </div>
    </footer></div>

<script src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/languages/less.min.js"></script><script src="https://developers.shopware.com/assets/js/anchor.min.1501499835.js"></script><script src="https://developers.shopware.com/assets/js/jquery.expandCode.1501499835.js"></script><script src="https://developers.shopware.com/assets/js/jquery.toc.1501499835.js"></script><script src="https://developers.shopware.com/assets/js/jquery.offcanvas.1501499835.js"></script><script src="https://developers.shopware.com/assets/js/app.1501499835.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><!-- Google Tag Manager --><noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5ZGXBG" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<script>(function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(), event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
            '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5ZGXBG');</script><!-- End Google Tag Manager --></body></html>